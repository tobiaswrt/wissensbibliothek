{% extends 'base.html' %}

{% block title %}Themen{% endblock %}

{% block content %}

<div class="heading_page_wrapper">
    <h1>Themen</h1>

    <div class="link_icon_wrapper background-dark-blue category_button">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 0C12.4539 0 12.8219 0.367985 12.8219 0.821918V11.1781H23.1781C23.632 11.1781 24 11.5461 24 12C24 12.4539 23.632 12.8219 23.1781 12.8219H12.8219V23.1781C12.8219 23.632 12.4539 24 12 24C11.5461 24 11.1781 23.632 11.1781 23.1781V12.8219H0.821918C0.367985 12.8219 0 12.4539 0 12C0 11.5461 0.367985 11.1781 0.821918 11.1781H11.1781V0.821918C11.1781 0.367985 11.5461 0 12 0Z" fill="currentColor"/>
        </svg>    
    </div>

</div>

{% if kategorien %}
    <div class="themen_category_grid">
        {% for kategorie in kategorien %}

            <a href="{{ url_for('kategorie_anzeigen', kategorie_id = kategorie.id) }}" class="category_box_outline">
                <div class="category_box">

                    <div class="category_info_container">
                        <div class="category_info_wrapper">
                        <div class="category_icon_wrapper">
                            <span class="category_icon">
                                <svg width="30" height="24" viewBox="0 0 30 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M5.42179 5.81818C5.42179 3.60904 7.2019 1.81818 9.39778 1.81818C11.5937 1.81818 13.3738 3.60904 13.3738 5.81818C13.3738 8.02732 11.5937 9.81818 9.39778 9.81818C7.2019 9.81818 5.42179 8.02732 5.42179 5.81818ZM9.39778 0C6.20378 0 3.61453 2.60489 3.61453 5.81818C3.61453 9.03147 6.20378 11.6364 9.39778 11.6364C12.5918 11.6364 15.181 9.03147 15.181 5.81818C15.181 2.60489 12.5918 0 9.39778 0ZM19.8799 7.27273C19.8799 5.86691 21.0127 4.72727 22.4101 4.72727C23.8075 4.72727 24.9403 5.86691 24.9403 7.27273C24.9403 8.67854 23.8075 9.81818 22.4101 9.81818C21.0127 9.81818 19.8799 8.67854 19.8799 7.27273ZM22.4101 2.90909C20.0146 2.90909 18.0726 4.86276 18.0726 7.27273C18.0726 9.6827 20.0146 11.6364 22.4101 11.6364C24.8056 11.6364 26.7475 9.6827 26.7475 7.27273C26.7475 4.86276 24.8056 2.90909 22.4101 2.90909ZM22.4095 22.5455C20.837 22.5455 19.5751 22.2893 18.5668 21.8747C18.6128 21.8171 18.6578 21.759 18.7018 21.7006C19.0589 21.2268 19.3325 20.7523 19.5423 20.303C20.2799 20.5612 21.2167 20.7273 22.4095 20.7273C25.5001 20.7273 26.8718 19.6125 27.5151 18.668C27.854 18.1703 28.0252 17.6694 28.1109 17.2919C28.1536 17.1042 28.1741 16.9509 28.184 16.8496C28.1889 16.7992 28.1911 16.7622 28.192 16.7409C28.1925 16.7312 28.1927 16.7248 28.1927 16.722V16.5455C28.1927 16.0434 27.7882 15.6364 27.2891 15.6364H20.1423C19.9915 14.9522 19.6742 14.331 19.2352 13.8182H27.2891C28.7863 13.8182 30 15.0392 30 16.5455V16.7273L30 16.7285V16.7299L30 16.7331L29.9999 16.7407L29.9996 16.7614C29.9992 16.7776 29.9986 16.7986 29.9974 16.8239C29.9951 16.8745 29.9908 16.943 29.9826 17.0268C29.9664 17.194 29.9347 17.4243 29.8728 17.6967C29.7496 18.2397 29.5028 18.9661 29.0059 19.6957C27.9775 21.2057 26.0057 22.5455 22.4095 22.5455ZM2.7109 13.8182C1.21371 13.8182 0 15.0392 0 16.5455V17.4545C0 17.4545 0 17.4537 0 17.456L4.48121e-06 17.4575L2.01654e-05 17.461L9.7811e-05 17.4696L0.0005293 17.4929C0.000974146 17.5112 0.00178016 17.535 0.00322552 17.5637C0.00611452 17.6212 0.0115688 17.6992 0.0218428 17.7946C0.0423583 17.9852 0.0822994 18.2476 0.160258 18.5579C0.31596 19.1778 0.626243 20.0004 1.24529 20.8219C2.51413 22.5058 4.93383 24 9.39778 24C13.8617 24 16.2814 22.5058 17.5503 20.8219C18.1693 20.0004 18.4796 19.1778 18.6353 18.5579C18.7133 18.2476 18.7532 17.9852 18.7737 17.7946C18.784 17.6992 18.7894 17.6212 18.7923 17.5637C18.7938 17.535 18.7946 17.5112 18.795 17.4929L18.7955 17.4696L18.7955 17.461L18.7956 17.4575L18.7956 17.456C18.7956 17.4541 18.7956 17.4545 18.7956 17.4545V16.5455C18.7956 15.0392 17.5818 13.8182 16.0847 13.8182H2.7109ZM1.80819 17.472C1.80759 17.46 1.80735 17.4522 1.80726 17.4489V16.5455C1.80726 16.0434 2.21184 15.6364 2.7109 15.6364H16.0847C16.5837 15.6364 16.9883 16.0434 16.9883 16.5455V17.4489C16.9882 17.4522 16.988 17.46 16.9874 17.472C16.9861 17.497 16.9833 17.5402 16.977 17.5989C16.9643 17.7165 16.9379 17.8945 16.8831 18.1125C16.7734 18.5494 16.5528 19.136 16.11 19.7235C15.2553 20.8578 13.428 22.1818 9.39778 22.1818C5.36758 22.1818 3.54021 20.8578 2.68551 19.7235C2.24279 19.136 2.02219 18.5494 1.91245 18.1125C1.85769 17.8945 1.83127 17.7165 1.8186 17.5989C1.81229 17.5402 1.80945 17.497 1.80819 17.472Z" fill="currentColor"/>
                                </svg>    
                            </span> 
                        </div>

                        <div class="category_heading_wrapper">
                            <h3>{{ kategorie.name }}</h3>
                            <p class="text-style-small">{{ kategorie.updated_at.strftime('%d.%m.%Y') }}</p>
                        </div>
                        </div>

                        <p>{{ kategorie.description|default('Keine Beschreibung vorhanden.')|truncate(100) }}</p>
                    </div>
                    <div class="category_btn_wrapper">
                        <div class="category_btn">
                            <svg width="18" height="24" viewBox="0 0 18 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 3.87692C0 1.73576 1.69236 0 3.78 0H14.22C16.3076 0 18 1.73576 18 3.87692V23.0769C18 23.4236 17.8106 23.741 17.5097 23.8988C17.2088 24.0566 16.847 24.0282 16.5731 23.8252L8.99996 18.2156L1.42694 23.8252C1.15295 24.0282 0.791196 24.0566 0.490274 23.8988C0.189352 23.741 0 23.4236 0 23.0769V3.87692ZM3.78 1.84615C2.68648 1.84615 1.8 2.75536 1.8 3.87692V21.2716L8.47301 16.3286C8.78758 16.0956 9.21233 16.0956 9.5269 16.3286L16.2 21.2716V3.87692C16.2 2.75536 15.3135 1.84615 14.22 1.84615H3.78Z" fill="currentColor"/>
                            </svg>    
                        </div>
                        <div class="category_btn">
                            <svg width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 9.99996C0 9.56848 0.353459 9.2187 0.789474 9.2187H21.2816L13.1833 1.33831C12.8724 1.03578 12.8682 0.541138 13.1739 0.233486C13.4796 -0.0741652 13.9795 -0.0783232 14.2904 0.224202L23.7564 9.43558C23.7622 9.44102 23.7678 9.44655 23.7734 9.45219C23.9072 9.58678 23.9816 9.75717 23.997 9.93161C24.0014 9.98182 24.001 10.0324 23.9956 10.0825C23.9775 10.252 23.9036 10.4168 23.7734 10.5478C23.7648 10.5565 23.7561 10.565 23.7475 10.5731L14.2904 19.7758C13.9795 20.0783 13.4796 20.0742 13.1739 19.7665C12.8682 19.4589 12.8724 18.9642 13.1833 18.6617L21.2817 10.7812H0.789474C0.353459 10.7812 0 10.4314 0 9.99996Z" fill="currentColor"/>
                            </svg>    
                        </div>
                    </div>

                </div>
            </a>

        {% endfor %}
    </div>
{% else %}
    <div class="empty_state">
        <p>Keine Subkategorien in dieser Kategorie gefunden.</p>
    </div>
{% endif %}

</div>

<div id="newCategoryPopup" class="popup_overlay">
    <div class="popup_container">
        <div class="popup_header">
            <h3>Neues Thema erstellen</h3>
            <div class="popup_close" data-popup-target="newCategoryPopup">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M24 2.4L21.6 0L12 9.6L2.4 0L0 2.4L9.6 12L0 21.6L2.4 24L12 14.4L21.6 24L24 21.6L14.4 12L24 2.4Z" fill="currentColor"/>
                </svg>
            </div>
        </div>
        <form action="{{ url_for('kategorie_erstellen') }}" method="post" class="popup_form">
            <div class="form_field">
                <label for="category_name">Name der Kategorie</label>
                <input type="text" name="name" id="category_name" required>
            </div>
            <div class="form_field">
                <label for="category_description">Beschreibung</label>
                <textarea name="description" id="category_description" rows="4"></textarea>
            </div>
            <div class="form_actions">
                <button type="submit" class="btn btn_primary">Erstellen</button>
                <button type="button" class="btn btn_secondary" data-popup-target="newCategoryPopup">Abbrechen</button>
            </div>
        </form>
    </div>
</div>

{% endblock %}